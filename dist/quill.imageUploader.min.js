!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=Quill},function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0};var l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));i.listners=[],i.domNode.addEventListener(t.removeEventName,(function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",i).call(i)}));var o=JSON.parse(i.domNode.getAttribute("data-filedata"));return i.domNode.querySelectorAll(".file-embed-option").forEach((function(e){var n=e.addEventListener("click",(function(n){var r=e.getAttribute("data-id"),a=new Event(t.optionClickEventName);a.data={data:o,optionId:r},a.optionDomNode=i.domNode,i.scroll.domNode.dispatchEvent(a)}));i.listners.push(n)})),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"create",value:function(e){var n=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this);return this.createBlot(n,e)}},{key:"createBlot",value:function(e,t){e.setAttribute("data-filedata",JSON.stringify(t));var n=document.createElement("span");n.className="file-blot","svg"===t.icon.type?n.innerHTML='<svg class="file-icon"><svg id="nu-ic-styles" viewBox="0 0 32 32"><use xlink:href="'+t.icon.value+'"></use></svg></svg><span class="file-label">'+t.label+"</span>":n.innerHTML='<i class="'+t.icon.value+' file-icon-font"></i><span class="file-label">'+t.label+"</span>";var i=document.createElement("span");i.className="more-opt-container",i.innerHTML='<svg class="more-opt-icon"><svg id="nu-ic-styles" viewBox="0 0 32 32"><use xlink:href="./assets/icons/symbol-defs.svg#nu-ic-more"></use></svg></svg>';var o=document.createElement("span");return o.className="more-opt",o.innerHTML='<ul class="more-opt-list"></ul>',(t.options||[]).forEach((function(e){var t=o.querySelector("ul"),n=document.createElement("span");n.innerHTML=e.label,n.setAttribute("data-id",e.id),n.className="file-embed-option",t.appendChild(n)})),i.appendChild(o),e.appendChild(n),e.appendChild(i),e}},{key:"value",value:function(e){return JSON.parse(e.getAttribute("data-filedata"))}}]),r(t,[{key:"remove",value:function(){var e=JSON.parse(this.domNode.getAttribute("data-filedata")),n=new Event(t.optionClickEventName);n.data={data:e,optionId:"remove"},n.optionDomNode=this.domNode,this.scroll.domNode.dispatchEvent(n)}}]),t}(o.a.import("blots/embed"));l.blotName="fileEmbed",l.tagName="span",l.className="file-embed",l.removeEventName="quill-file-embed-remove",l.optionClickEventName="quill-file-embed-option";var s=l,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o.a.import("blots/embed");var d=function(e){function t(){return c(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,null,[{key:"createBlot",value:function(e,t){e.setAttribute("data-filedata",JSON.stringify(t));var n=document.createElement("span");n.className="image-thumbnail-blot",n.innerHTML='<div class="image-thumbnail-div" style="background-image: url('+(t.imgSrc||t.link)+')"></div>',e.appendChild(n);var i=document.createElement("span");i.className="more-opt-container",i.innerHTML='<svg class="more-opt-icon"><svg id="nu-ic-styles" viewBox="0 0 32 32"><use xlink:href="./assets/icons/symbol-defs.svg#nu-ic-more"></use></svg></svg>';var o=document.createElement("span");return o.className="more-opt",o.innerHTML='<ul class="more-opt-list"></ul>',(t.options||[]).forEach((function(e){var t=o.querySelector("ul"),n=document.createElement("span");n.innerHTML=e.label,n.setAttribute("data-id",e.id),n.className="file-embed-option",t.appendChild(n)})),i.appendChild(o),e.appendChild(i),e}}]),t}(s);d.blotName="imageThumbnail",d.tagName="span",d.className="image-thumbnail";var p=d,m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0};function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){return h(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),m(t,[{key:"deleteAt",value:function(e,n){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,n),this.cache={}}}],[{key:"create",value:function(e){var n=v(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);if(!0===e)return n;var i=document.createElement("img");return i.setAttribute("src",e),n.appendChild(i),n}},{key:"value",value:function(e){var t=e.dataset;return{src:t.src,custom:t.custom}}}]),t}(o.a.import("blots/block"));g.blotName="imageBlot",g.className="image-uploading",g.tagName="span",o.a.register({"formats/imageBlot":g});var y=g,O=(n(3),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());var E=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=n,this.range=null,"function"!=typeof this.options.upload&&console.warn("[Missing config] upload function that returns a promise is required"),this.quill.getModule("toolbar").addHandler("image",this.selectLocalImage.bind(this)),this.handleDrop=this.handleDrop.bind(this),this.handlePaste=this.handlePaste.bind(this),this.handleInsertFile=this.handleInsertFile.bind(this),this.quill.root.addEventListener("drop",this.handleDrop,!1),this.quill.root.addEventListener("paste",this.handlePaste,!1),this.quill.root.addEventListener(s.optionClickEventName,(function(e){return i.handleFileEmbeddOptions(e)}),!1)}return O(e,[{key:"handleFileEmbeddOptions",value:function(e){this.options.onOptionClick(e).then((function(t){if("remove"===t.data.optionId&&t.success){var n=e.optionDomNode,i=new Event(s.removeEventName);n.dispatchEvent(i)}}))}},{key:"selectLocalImage",value:function(){var e=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=this.fileChanged.bind(this),document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame((function(){document.body.removeChild(e.fileHolder)}))}},{key:"handleDrop",value:function(e){var t=this;if(e.stopPropagation(),e.preventDefault(),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){if(document.caretRangeFromPoint){var n=document.getSelection(),i=document.caretRangeFromPoint(e.clientX,e.clientY);n&&i&&n.setBaseAndExtent(i.startContainer,i.startOffset,i.startContainer,i.startOffset)}else{var o=document.getSelection(),r=document.caretPositionFromPoint(e.clientX,e.clientY);o&&r&&o.setBaseAndExtent(r.offsetNode,r.offset,r.offsetNode,r.offset)}this.range=this.quill.getSelection();var a=e.dataTransfer.files[0];setTimeout((function(){t.range=t.quill.getSelection(),t.readAndUploadFile(a)}),0)}}},{key:"handleInsertFile",value:function(e,t){var n=this;setTimeout((function(){n.range=t,n.readAndUploadFile(e)}),0)}},{key:"handlePaste",value:function(e){var t=this,n=e.clipboardData||window.clipboardData;if(n&&(n.items||n.files))for(var i=n.items||n.files,o=/^image\/(jpe?g|gif|png|svg|webp)$/i,r=0;r<i.length;r++)o.test(i[r].type)&&function(){var n=i[r].getAsFile?i[r].getAsFile():i[r];n&&(t.range=t.quill.getSelection(),e.preventDefault(),setTimeout((function(){t.range=t.quill.getSelection(),t.readAndUploadFile(n)}),0))}()}},{key:"readAndUploadFile",value:function(e){var t=this,n=!1,i=new FileReader;i.addEventListener("load",(function(){if(!n){var e=i.result;t.insertBase64Image(e)}}),!1),e&&i.readAsDataURL(e),this.options.upload(e).then((function(e){t.insertToEditor(e)}),(function(e){n=!0,t.removeBase64Image(),console.warn(e)}))}},{key:"fileChanged",value:function(){var e=this.fileHolder.files[0];this.readAndUploadFile(e)}},{key:"insertBase64Image",value:function(e){this.options&&this.options.loadingImageUrl&&(e=this.options.loadingImageUrl);var t=this.range;this.quill.insertEmbed(t.index,y.blotName,""+e,"user")}},{key:"insertToEditor",value:function(e){var t=this.range;this.quill.deleteText(t.index,2,"user"),"file"===e.type?this.quill.insertEmbed(t.index,s.blotName,e,"user"):this.quill.insertEmbed(t.index,"image",""+(e.imgSrc||e.link),"user"),t.index++,this.quill.setSelection(t,"user")}},{key:"removeBase64Image",value:function(){var e=this.range;this.quill.deleteText(e.index,2,"user")}}]),e}();o.a.register(s,!0),o.a.register({"formats/imageThumbnail":p}),window.ImageUploader=E;t.default=E},,function(e,t){}]);